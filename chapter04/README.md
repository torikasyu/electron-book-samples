# Electron + React + TypeScript IPCサンプル

このプロジェクトは、Electron、React、TypeScriptを使用したIPC（プロセス間通信）の基本的な使い方を学ぶためのサンプルアプリケーションです。

## 動作環境

- Node.js 18.0.0 以上
- npm 9.0.0 以上

## 機能

このアプリケーションには以下の機能が含まれています：

1. **ファイル選択ダイアログ** - メインプロセスのElectron APIを使用してネイティブのファイル選択ダイアログを表示し、選択されたファイルパスをレンダラープロセスに返します。
2. **システム情報表示** - メインプロセスからシステム情報（OS、CPU、メモリ、稼働時間など）を取得して表示します。

## プロジェクト構成

```
chapter04/
├── dist/                      # ビルド出力先
│   ├── main.js               # コンパイルされたメインプロセス
│   └── renderer/             # バンドルされたレンダラーファイル
├── src/                      # ソースコード
│   ├── main/                 # メインプロセス
│   │   └── main.ts           # メインプロセスのエントリーポイント
│   └── renderer/             # レンダラープロセス
│       ├── components/       # UIコンポーネント
│       ├── App.tsx           # メインのReactコンポーネント
│       ├── index.html        # HTMLテンプレート
│       └── index.tsx         # レンダラープロセスのエントリーポイント
├── package.json              # プロジェクト設定
├── tsconfig.json             # TypeScript設定
└── webpack.config.js         # Webpack設定
```

## 重要なコンセプト

### コンテキスト分離（Context Isolation）

このアプリケーションでは、セキュリティを向上させるために「コンテキスト分離」を使用しています。これにより、レンダラープロセスからNode.jsのAPIに直接アクセスできなくなり、preloadスクリプトを介して明示的に公開されたAPIのみを使用できます。

### IPC通信

Electronでは、メインプロセスとレンダラープロセス間の通信にIPCを使用します。このアプリケーションでは以下のIPC通信パターンを示しています：

- **invoke/handle**: レンダラーからメインプロセスへの要求と応答（Promise形式）
- **contextBridge**: preloadスクリプトを使用してAPIを安全に公開

## セットアップ

1. 依存関係をインストール:
```bash
npm install
```

## 開発手順

### 開発モード

開発用にビルドしてElectronを起動します（ファイル変更時に自動再ビルド）:

```bash
npm run dev
```

### ビルド
```bash
npm run build
```

### 実行

ビルド済みのアプリケーションを実行します:

```bash
npm start
```

## 主な機能

1. **IPC通信**
   - メインプロセスとレンダラープロセス間の双方向通信
   - ファイルシステム操作などのNode.js APIの安全な利用

2. **コンポーネントベースのUI**
   - Reactのコンポーネントを使用した宣言的なUI構築
   - 状態管理とライフサイクルの理解

3. **開発者体験**
   - TypeScriptによる型安全な開発
   - ESLintとPrettierによるコード品質の維持